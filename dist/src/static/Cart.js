(()=>{"use strict";function t(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var n=function(){function n(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n)}var e,a;return e=n,a=[{key:"getAll",value:function(){return{items:[{label:"Site",link:"",subs:[{label:"Login",link:"/login"},{label:"Registrar-se",link:"/register"},{label:"Carrinho",link:"/cart"},{label:"Meus pedidos",link:"/production"},{label:"Preferidos",link:"/catalog_user"},{label:"Dúvidas",link:"/faq"},{label:"Sair",link:"/logout"}]},{label:"Quadros",link:"/catalog_poster",subs:[]},{label:"Miniaturas",link:"/catalog",subs:[]}]}}}],null&&t(e.prototype,null),a&&t(e,a),n}();function e(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var a=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}var a,r;return a=t,r=[{key:"getHtml",value:function(){for(var t=n.getAll(),e=1350,a='<div class="menu-main-container2"><ul id="main_menu2" class="nav2 navbar2-nav2 group2 navbar2-collapse collapse2">',r=0;r<t.items.length;++r){e++;var o=t.items[r];if(a+='<li id="menu-item-'+e+'" class="menu-item2 menu-item-type-post_type2 menu-item-object-page2 menu-item-has-children2 menu-item-'+e+'" style="margin-right:20px">',a+='<a href="'+o.link+'">'+o.label+"</a>",o.subs.length>0){a+='<ul class="sub-menu">';for(var i=0;i<o.subs.length;++i){var l=o.subs[i];a+='<li id="menu-item-"'+ ++e+' class="menu-item2 menu-item-type-post_type2 menu-item-object-page2 menu-item-'+e+'" style="margin-right:20px">',a+='<a style="color:white" href="'+l.link+'">'+l.label+"</a>",a+="</li>"}a+="</ul>"}a+="</li>"}return a+'</ul></div><div class="clear"></div><div id="magic-line"></div><div class="clear"></div>'}}],null&&e(a.prototype,null),r&&e(a,r),t}();function r(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var o=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,e;return n=t,e=[{key:"getHtml",value:function(){return'<div class="container">\n\t\t\t\t<div align=\'center\'>\n\t\t\t\t\t<br><br><br>\n\t\t\t\t\t<h4></h4>\n\t\t\t\t\t<br><br><br>\n\t\t\t\t</div>\n\t\t\t\t<br>\n\t\t\t\t<br>\n\t\t\t\t<div align="center">\n\t\t\t\t\t<img src="src/static/img/logo.png" alt="logo" width="221px" height="80px"  />\n\t\t\t\t\t<br>\n\t\t\t\t\t<img src="src/static/img/logo_2.png" alt="logo"width="373px" height="55px" />\n\t\t\t\t\t<br>\n\t\t\t\t\t<br>\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<br>\n\t\t\t\t<br>\n\t\t\t</div>\n\t\t\t<link rel="stylesheet" href="https://cdn.positus.global/production/resources/robbu/whatsapp-button/whatsapp-button.css">\n\t\t\t<a id="robbu-whatsapp-button" target="_blank" href="https://api.whatsapp.com/send?phone=5551995152432&text=Big%20Boys%20Store - Dúvidas">\n\t\t\t<div class="rwb-tooltip" style=\'color:white\'>Dúvidas?</div>\n\t\t\t<img src="https://cdn.positus.global/production/resources/robbu/whatsapp-button/whatsapp-icon.svg">\n\t\t\t</a>\n\t\t\t<br>            \n            <br>    \n            '}}],null&&r(n.prototype,null),e&&r(n,e),t}();function i(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var l=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,e;return n=t,e=[{key:"getHtml",value:function(){var t=localStorage.getItem("userName");return document.getElementById("myAppUserLogin").innerHTML="null"!=t&&null!=t?"Bem-vindo, <strong><a href='/cart' style='color:white'> ".concat(t," </a></strong><br>"):"Clique <strong><a href='/login' style='color:white'> aqui </a></strong> para fazer login<br>",""}}],null&&i(n.prototype,null),e&&i(n,e),t}();function c(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var d=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,e;return n=t,e=[{key:"getHtml",value:function(){return'<span class="loadingio-spinner-spinner-4rb4hgyrsge" id=\'loading\' style="display: none">\n                <div class="ldio-k0jb5gkv3kn"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>\n                </div></span>'}}],null&&c(n.prototype,null),e&&c(n,e),t}();function s(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var u=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,e;return n=t,e=[{key:"getHtml",value:function(){return document.getElementById("portal_title").textContent="Big Boys - Colecionáveis",""}}],null&&s(n.prototype,null),e&&s(n,e),t}();function p(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var g=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,e;return n=t,e=[{key:"getHtml",value:function(){return u.getHtml(),l.getHtml(),document.getElementById("myAppMenu").innerHTML=a.getHtml(),document.getElementById("myAppFooter").innerHTML=o.getHtml(),document.getElementById("myAppLoader").innerHTML=d.getHtml(),""}}],null&&p(n.prototype,null),e&&p(n,e),t}();function m(t,n){var e=function(){var t="__API_indexPos",n=sessionStorage.getItem(t);null==n&&(n=0);var e=parseInt(n),a=[{api_host:"http://localhost",api_port:18524}];return++e>=a.length&&(e=0),sessionStorage.setItem(t,e),a[e]}(),a=JSON.stringify(n);return new Promise((function(n,r){fetch(e.api_host+":"+e.api_port+"/api/"+t,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer "+localStorage.getItem("token")},body:a}).then((function(t){400===t.status?t.json().then((function(t){r({ok:!1,msg:t.message})})):!0===t.ok?t.json().then((function(t){n({ok:!0,payload:t})})):t.json().then((function(t){n({ok:!1,msg:t.message})}))})).catch((function(t){n({ok:!1,unauthorized:!0})}))}))}function b(t){return null==t&&(t="Area restrita!<br><br>Favor logar-se no sistema <a href='/login' style='color:blue' >aqui</a>"),"\n  <div id=\"myModal\" class=\"modal\" style='display:block'>\n    <div style='margin: 15% auto' align='center'>\n      <div style='background-color:white;width:400px;color:black'>\n        <div style='background-color:red;width:400px' align='center'>\n          <table style='width:380px'>\n            <tr>\n              <td><h3 style='color:white;margin-top:2px;margin-bottom:2px;'> Aviso do sistema</h3></td>\n              <td width='140px'> </td>\n              <td align='right'> &nbsp;&nbsp;&nbsp;<h3 class=\"close\" style='margin-top:2px;' onclick=\"document.getElementById('myModal').style.display = 'none'\">&times;</h3></td>\n            </tr>\n          </table>    \n        </div>  \n        <br><br>\n        <h4 style='color:black;margin-left:24px;margin-right:24px;'>".concat(t,"</h4><br>\n        <br>\n        <br>\n        <br>\n      </div>  \n    </div>\n  </div>")}function v(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var h=function(){function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.params=n,document.body.addEventListener("click",(function(t){switch(t.target.id){case"cancelar_item":t.target.style="background-color:black;pointer-events:none;",m("v1/sale/cart_remove",{productId:t.target.attributes[2].value,cartId:t.target.attributes[3].value}).then((function(t){setTimeout((function(){window.location.href="/cart"}),500)})).catch((function(n){t.target.style="background-color:red;pointer-events:all;"}));break;case"confirm_register":t.target.style="background-color:black;pointer-events:none;",m("v1/sale/register",{}).then((function(t){window.location.href="/cart"}));break;case"confirm_gmap":t.target.style="background-color:black;pointer-events:none;",m("v1/sale/confirm_sale",{gmap:document.getElementById("location").value}).then((function(t){window.location.href="/cart"})).catch((function(n){t.target.style="background-color:red;pointer-events:all;"}));break;case"cancel_cart":t.target.style="background-color:black;pointer-events:none;",m("v1/sale/cancel_cart",{}).then((function(t){window.location.href="/cart"})).catch((function(n){t.target.style="background-color:red;pointer-events:all;"}))}}))}var n,e;return n=t,(e=[{key:"getHtml",value:function(){var t=localStorage.getItem("userName");return null==t||null==t?document.getElementById("warningPage").style.display="block":document.getElementById("mainPage").style.display="block",g.getHtml(),document.getElementById("loading").style.display="block",m("v1/sale/cart_list",{}).then((function(t){if(document.getElementById("loading").style.display="none",1==t.ok){if(0===t.payload.saleStage){var n="<div style='background-color: rgba(5,5,5,0.25); margin-left:4px;margin-right:4px;'><br><h3>Itens em sua sacola</h3><br>";n+="<table><tr><td width='120px'></td><td width='16px'></td><td width='120px'></td><td></td><td width='8px'></td><td></td></tr>";for(var e=0;e<t.payload.cart.length;e+=1){var a=t.payload.cart[e],r="Quadro ";parseInt(a.productOption)>=1?1==a.productOption?r+="A3":r+="A2":r="Miniatura",n+="<tr height='70px'><td><a href='/item?id=".concat(a.productId,"'>\n                            <img src=\"src/static/products/").concat(a.productId,"/promoBig.jpg\" style='max-height:66px' /></a></td><td></td>\n                            <td><br>").concat(r,"<br>Item ").concat(a.productId,"</td>\n                            <td><br>R$ ").concat(a.price,"</td>\n                            <td></td>\n                            <td><p style='margin-top:20px'><div id='cancelar_item' class='button' option1='").concat(a.productId,"' option2='").concat(a.cartId,"' style='width:32px;'>X</div></p></tr>")}t.payload.cart.length>0?(n+="</table>",n+="<br><h4>TOTAL: <strong>R$ ".concat(t.payload.total,"</strong></h4><br>"),n+="<br><div id='confirm_register' class='button' style='background-color:green''>Registrar (1/3)</div><br><br></div>"):(n+="</table>",n+="<br><br>Nenhum item selecionado<br><br><br><br>"),document.getElementById("myAppCart").innerHTML=n}else if(1===t.payload.saleStage){n="<div style='background-color: rgba(5,5,5,0.25); margin-left:4px;margin-right:4px;'><br><h3>Confirme seu local de entrega</h3><br>",n+='<div class="gmap_canvas" style="height:370px">\n                                        <iframe\n                                          width="600"\n                                          height="350"\n                                          id="gmap_canvas"\n                                          style="display: block"\n                                          src="https://maps.google.com/maps?q='.concat(t.payload.gmap,'&t=&z=13&ie=UTF8&iwloc=&output=embed"\n                                          frameborder="0"\n                                          scrolling="no"\n                                          marginheight="0"\n                                          marginwidth="0"\n                                        ></iframe\n                                        ><a href="https://putlocker-is.org"></a\n                                        ><br /><style>\n                                          .mapouter {\n                                            position: relative;\n                                            text-align: right;\n                                            height: 500px;\n                                            width: 600px;\n                                          }</style\n                                        ><a\n                                          href="https://www.embedgooglemap.net"\n                                          >google map html code</a\n                                        ><style>\n                                          .gmap_canvas {\n                                            overflow: hidden;\n                                            background: none !important;\n                                            height: 500px;\n                                            width: 600px;\n                                          }\n                                        </style>\n                                      </div>'),n+='<div class="form__group field">\n                            <input\n                              type="input"\n                              class="form__field"\n                              name="location"\n                              id="location"\n                              required\n                            />\n                            <label for="location" class="form__label"\n                              >Novo endereço de entrega</label\n                            >\n                            <div\n                              id="validation_location"\n                              class="button_verif"\n                              style="display: none"\n                            >\n                              Valor inválido\n                            </div>\n                          </div><br>',n+="<table><tr><td width='120px'></td><td width='16px'></td><td width='120px'></td><td></td><td width='8px'></td><td></td></tr>";for(var o=0;o<t.payload.cart.length;o+=1)a=t.payload.cart[o],r="Quadro ",parseInt(a.productOption)>=1?1==a.productOption?r+="A3":r+="A2":r="Miniatura",n+="<tr height='70px'><td><a href='/item?id=".concat(a.productId,"'>\n                            <img src=\"src/static/products/").concat(a.productId,"/promoBig.jpg\" style='max-height:66px' /></a></td><td></td>\n                            <td><br>").concat(r,"<br>Item ").concat(a.productId,"</td>\n                            <td><br>R$ ").concat(a.price,"</td>\n                            <td></td>\n                            <td><p style='margin-top:20px'><div id='cancelar_item' class='button' option1='").concat(a.productId,"' option2='").concat(a.cartId,"' style='width:32px;'>X</div></p></tr>");t.payload.cart.length>0&&(n+="</table>",n+="<br><h4>TOTAL: <strong>R$ ".concat(t.payload.total,"</strong></h4><br>"),n+="<br><div id='confirm_gmap' class='button' style='background-color:green''>Confirmar (2/3)</div><br><br></div>"),document.getElementById("myAppCart").innerHTML=n,setTimeout((function(){var n=document.getElementById("location");n.value=t.payload.gmap,n.addEventListener("blur",(function(t){document.getElementById("validation_location").style.display="none",""!=this.value&&this.value.length>25||(document.getElementById("validation_location").style.display="block")}),!0),n.addEventListener("keyup",(function(t){"Enter"===t.key&&(document.getElementById("gmap_canvas").src="https://maps.google.com/maps?q="+n.value+"&t=&z=13&ie=UTF8&iwloc=&output=embed")}))}),300)}else if(2===t.payload.saleStage){n="<div style='background-color: rgba(5,5,5,0.25); margin-left:4px;margin-right:4px;'><br><h3>Pronto!</h3><br>",n+="<table><tr><td width='120px'></td><td width='16px'></td><td width='120px'></td><td></td><td width='8px'></td><td></td></tr>";for(var i=0;i<t.payload.cart.length;i+=1)a=t.payload.cart[i],r="Quadro ",parseInt(a.productOption)>=1?1==a.productOption?r+="A3":r+="A2":r="Miniatura",n+="<tr height='70px'><td><a href='/item?id=".concat(a.productId,"'>\n                            <img src=\"src/static/products/").concat(a.productId,"/promoBig.jpg\" style='max-height:66px' /></a></td><td></td>\n                            <td><br>").concat(r,"<br>Item ").concat(a.productId,"</td>\n                            <td><br>R$ ").concat(a.price,"</td>\n                            <td></td>\n                            <td><p style='margin-top:20px'><div id='cancelar_item' class='button' option1='").concat(a.productId,"' option2='").concat(a.cartId,"' style='width:32px;'>X</div></p></tr>");t.payload.cart.length>0&&(n+="</table>",n+="<br><h4>TOTAL: <strong>R$ ".concat(t.payload.total,"</strong></h4><br>"),n+="<br><h4>Local de entrega:<br><br> <strong>".concat(t.payload.gmap,"</strong></h4><br>"),n+="<br><div id='confirm_buy' style='background-color:green' class='button'>Pagar (3/3)</div>",n+="<br><div id='cancel_cart' class='button'>Cancelar carrinho</div><br><br><br><br></div>",n+="<br><br><br><br><br></div>"),document.getElementById("myAppCart").innerHTML=n}}else document.getElementById("mainPageNOK").style="display:block",document.getElementById("failMsg").innerHTML=b()})).catch((function(t){document.getElementById("loading").style.display="none",document.getElementById("mainPageNOK").style="display:block",document.getElementById("failMsg").innerHTML=b(t.msg)})),""}}])&&v(n.prototype,e),t}();function f(t,n){for(var e=0;e<n.length;e++){var a=n[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var y=function(){function t(n){(function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")})(this,t),this.url=n}return n=t,(e=[{key:"getHtml",value:function(){var t=this.url,n={id:null},e=t.split("/");return t="/"+e[1],e.length>=2&&(n.id=e[2]),"".concat(new h(n).getHtml())}}])&&f(n.prototype,e),a&&f(n,a),t;var n,e,a}(),w=function(){new y(window.location.pathname).getHtml()};window.addEventListener("popstate",w),document.addEventListener("DOMContentLoaded",(function(){document.body.addEventListener("click",(function(t){var n;t.target.matches("[data-link]")&&(t.preventDefault(),n=t.target.href,history.pushState(null,null,n),w())})),w()}))})();
//# sourceMappingURL=Cart.js.map